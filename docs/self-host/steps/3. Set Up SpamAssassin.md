## Step 3: Set Up SpamAssassin (Optional)

SpamAssassin is essential for filtering out spam emails. In this step, we'll configure SpamAssassin on a dedicated VPS and make it accessible through `spamd.frappemail.com`.

### 3.1 Add a DNS A Record

First, we need to add a DNS record that points `spamd.frappemail.com` to the IP address of the VPS where SpamAssassin will be installed.

1. **Login to your DNS provider's dashboard** (such as Cloudflare, GoDaddy, etc.).
2. **Add an A Record:**

   - **Name:** spamd
   - **Type:** A
   - **TTL:** Auto or a specific TTL value
   - **Value:** IP address of your SpamAssassin VPS

   This will make `spamd.your-domain.com` point to the SpamAssassin service.

### 3.2 Install SpamAssassin

Once the DNS record is set up, you can install and configure SpamAssassin on your VPS.

1. **Update your system:** Make sure your VPS is up to date:

   ```bash
   sudo apt update
   sudo apt upgrade -y
   ```

2. **Install SpamAssassin:** Install SpamAssassin along with the spamd daemon:

   ```bash
   sudo apt install spamassassin spamc
   ```

3. **Create a user:**

   ```bash
   sudo adduser --system --no-create-home --group spamd
   ```

4. **Enable the SpamAssassin Daemon:**

   Edit the SpamAssassin configuration to enable the daemon mode (spamd):

   ```bash
   sudo nano /etc/default/spamassassin
   ```

   Set the following parameters:

   ```plaintext
   ENABLED=1
   OPTIONS="--create-prefs --max-children 5 --helper-home-dir -u spamd --listen=0.0.0.0:783 --allowed-ips=127.0.0.1,YOUR_IP_ADDRESS/24”
   ```

   Replace `YOUR_IP_ADDRESS` with your mail site’s server IP address. Save the file and exit.

5. **Start and Enable spamd:** After enabling the daemon, start and enable the spamd service:

   ```bash
   sudo systemctl enable spamassassin
   sudo systemctl start spamassassin
   ```

6. **Verify SpamAssassin Status:** Check that SpamAssassin (spamd) is running properly:

   ```bash
   sudo systemctl status spamassassin
   ```

7. **Firewall Settings:** If you are using a firewall, open the necessary ports for SpamAssassin:

   ```bash
   sudo ufw allow 783/tcp
   ```

Now, your SpamAssassin service is running on `spamd.your-domain.com`, ready to filter emails for spam.
